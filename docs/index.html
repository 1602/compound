<!DOCTYPE html>
<html class="style-dark">
  <head>
    <title>CompoundJS - build apps with love</title>
    <link rel="stylesheet" href="stylesheets/application.css">
    <link rel="stylesheet" href="stylesheets/prettify.css">
    <link href="http://fonts.googleapis.com/css?family=Quicksand:300" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="javascripts/prettyprint.js"></script>
    <script src="javascripts/application.js"></script>
  </head>
  <body>
    <div class="sidebar hidden">
      <ul class="items"></ul>
    </div>
    <div class="content-wrapper"><img src="images/logo.png" alt="CompoundJS" class="logo">
      <div class="style-switch"></div>
      <section id="routing">
        <h1>Routing</h1>
        <p>The purpose of routes is to connect a URL with a controller action. For example, you can define the following route in <code>config/routes.js</code> to link <code>GET /signup</code> with <code>new</code> action of <code>users</code> controller:</p>
        <pre class="prettyprint">map.get('signup', 'users#new');</pre>
        <p>The following route will link <code>GET /</code> to the <code>index</code> action of the<code>home</code> controller:</p>
        <pre class="prettyprint">map.root('home#index');</pre>
      </section>
      <section id="routing-resources">
        <h2>Resource-based routing</h2>
        <p>Resource-based routing provides standard mapping between HTTP verbs and controller actions:</p>
        <pre class="prettyprint">map.resources('posts');</pre>
        <p>will provide the following routes:</p>
        <pre class="prettyprint">&nbsp;&nbsp;helper | method | path                   | controller#action
    posts GET      /posts                   posts#index
    posts POST     /posts                   posts#create
&nbsp;new_post GET      /posts/new               posts#new
edit_post GET      /posts/:id/edit          posts#edit
     post DELETE   /posts/:id               posts#destroy
     post PUT      /posts/:id               posts#update
     post GET      /posts/:id               posts#show.
     </pre>
        <p>
           
          To list all available routes you can run the command <code>compound routes</code>.
        </p>
        <p>The first column of the table represents the <code>helper</code> - you can use this identifier in views and controllers to get the route. Some examples:</p>
        <pre class="prettyprint">path_to.new_post            # /posts/new
path_to.edit_post(1)        # /posts/1/edit
path_to.edit_post(post)     # /posts/1/edit (in this example post = {id: 1})
path_to.posts               # /posts
path_to.post(post)          # /posts/1.

</pre>
      </section>
      <section id="routing-resources-alias">
        <h2>Aliases for resourceful routes</h2>
        <p>If you want to override default routes behaviour, you can use two options: <code>as</code> and <code>path</code> to specify a helper name and a path you want to have in the result.</p>
        <section id="routing-resources-alias-as">
          <h3>{ as: 'helperName' }</h3>
          <p>Path helper aliasing:</p>
          <pre class="prettyprint">map.resources('posts', { as: 'articles' });</pre>
          <p>This will create the following routes:</p>
          <pre class="prettyprint">&nbsp;&nbsp;&nbsp;&nbsp;articles GET    /posts.:format?          posts#index
    articles POST   /posts.:format?          posts#create
&nbsp;new_article GET    /posts/new.:format?      posts#new
edit_article GET    /posts/:id/edit.:format? posts#edit
     article DELETE /posts/:id.:format?      posts#destroy
     article PUT    /posts/:id.:format?      posts#update
     article GET    /posts/:id.:format?      posts#show.
     </pre>
        </section>
        <section id="routing-resources-alias-path">
          <h3>{ path: 'alternatePath' }</h3>
          <p>If you want to change the base path:</p>
          <pre class="prettyprint">map.resources('posts', { path: 'articles' });</pre>
          <p>This will create the following routes:</p>
          <pre class="prettyprint">&nbsp;&nbsp;&nbsp;&nbsp;posts GET    /articles.:format?          posts#index
    posts POST   /articles.:format?          posts#create
&nbsp;new_post GET    /articles/new.:format?      posts#new
edit_post GET    /articles/:id/edit.:format? posts#edit
     post DELETE /articles/:id.:format?      posts#destroy
     post PUT    /articles/:id.:format?      posts#update
     post GET    /articles/:id.:format?      posts#show
     </pre>
        </section>
        <section id="routing-resources-alias-both">
          <h3>All together</h3>
          <p>If you want to alias both the helper and the path:</p>
          <pre class="prettyprint">map.resources('posts', { path: 'articles', as: 'stories' });</pre>
          <p>This will create the following routes:</p>
          <pre class="prettyprint">&nbsp;&nbsp;&nbsp;stories GET    /articles.:format?          posts#index
   stories POST   /articles.:format?          posts#create
&nbsp;new_story GET    /articles/new.:format?      posts#new
edit_story GET    /articles/:id/edit.:format? posts#edit
     story DELETE /articles/:id.:format?      posts#destroy
     story PUT    /articles/:id.:format?      posts#update
     story GET    /articles/:id.:format?      posts#show
     </pre>
        </section>
      </section>
      <section id="routing-nested-resources">
        <h2>Nested resources</h2>
        <p>Some resources may have nested sub-resources, for example <code>Post</code> has many <code>Comments</code>, and of course we want to get a post's comments using <code>GET /post/1/comments</code>.</p>
        <p>Let's describe the route for our nested resource:</p>
        <pre class="prettyprint">map.resources('post', function (post) {
  post.resources('comments');
});.
</pre>
        <p>This routing map will provide the following routes:</p>
        <pre class="prettyprint">$ compound routes
     post_comments GET      /posts/:post_id/comments          comments#index
     post_comments POST     /posts/:post_id/comments          comments#create
&nbsp;&nbsp;new_post_comment GET      /posts/:post_id/comments/new      comments#new
 edit_post_comment GET      /posts/:post_id/comments/:id/edit comments#edit
      post_comment DELETE   /posts/:post_id/comments/:id      comments#destroy
      post_comment PUT      /posts/:post_id/comments/:id      comments#update
      post_comment GET      /posts/:post_id/comments/:id      comments#show
             posts GET      /posts                            posts#index
             posts POST     /posts                            posts#create
      &nbsp;&nbsp;&nbsp;&nbsp;new_post GET      /posts/new                        posts#new
         edit_post GET      /posts/:id/edit                   posts#edit
              post DELETE   /posts/:id                        posts#destroy
              post PUT      /posts/:id                        posts#update
              post GET      /posts/:id                        posts#show.
              </pre>
        <section id="routing-url-helpers-nested">
          <h3>Using url helpers for nested routes</h3>
          <p>To use routes like <code>post_comments</code> you should call helper with param: parent resource or identifier before nested resource:</p>
          <pre class="prettyprint">path_to.post_comments(post)               # /posts/1/comments
path_to.edit_post_comment(post, comment)  # /posts/1/comments/10/edit
path_to.edit_post_comment(2, 300)         # /posts/2/comments/300/edit.
</pre>
        </section>
      </section>
      <section id="routing-namespaces">
        <h2>Namespaces</h2>
        <p>You may wish to organize groups of controllers under a namespace. The most common use-case is an administration area. All controllers within the <code>admin</code> namespace should be located inside the <code>app/controllers/</code> directory.</p>
        <p>For example, let's create an admin namespace:</p>
        <pre class="prettyprint">map.namespace('admin', function (admin) {
  admin.resources('users');
});.
</pre>
        <p>This routing rule will match with <code>/admin/users</code>, <code>/admin/users/new</code> and will create appropriate url helpers:</p>
        <pre class="prettyprint">&nbsp;&nbsp;&nbsp;&nbsp;admin_users GET    /admin/users.:format?          admin/users#index
    admin_users POST   /admin/users.:format?          admin/users#create
&nbsp;new_admin_user GET    /admin/users/new.:format?      admin/users#new
edit_admin_user GET    /admin/users/:id/edit.:format? admin/users#edit
     admin_user DELETE /admin/users/:id.:format?      admin/users#destroy
     admin_user PUT    /admin/users/:id.:format?      admin/users#update
     admin_user GET    /admin/users/:id.:format?      admin/users#show
     </pre>
      </section>
      <section id="restricting-routes">
        <h2>Restricting routes</h2>
        <p>
           
          If you need routes only for several actions (e.g. <code>index</code>, <code>show</code>), you can specify the <code>only</code> option:
        </p>
        <pre class="prettyprint">map.resources('users', { only: ['index', 'show'] });</pre>
        <p>
           
          If you want to have all routes except a specific route, you can specify the <code>except</code> option:
        </p>
        <pre class="prettyprint">map.resources('users', { except: ['create', 'destroy'] });</pre>
      </section>
      <section id="routing-custom-actions">
        <h2>Custom actions in resourceful routes</h2>
        <p>If you need some specific action to be added to your resource-based route, use this example:</p>
        <pre class="prettyprint">map.resource('users', function (user) {
  user.get('avatar', 'users#avatar');
});.</pre>
      </section>
    </div>
  </body>
</html>