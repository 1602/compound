## Migration guide from RailwayJS 1.0 to CompoundJS 1.1.3

### General guidelines

* The app variable is no longer global, but accessible via compound.app . Make sure to change all your files that reference app directly
* The same goes for models. They are now accessible via compound.models.<ModelName> . This also applies to model relations, for example: model.hasMany(compound.models.anotherModel);
* The following files, autogenerated by railwayjs, should be regeneraterd or rewritten since they changed
    * server.js
    * config/environment.js, config/environments/\*, and config/initializers (see below)
    * app/models/\* (see below)
    * config/initializers/db-tools.js
    * views using `formTag` and `formFor`(see below)

### config/environment.js, config/environments/\*, and config/initializers

now should export function

```javascript
module.exports = function (compound) {
    var app = compound.app;
    var User = compound.models.User;
    // rest of file goes here
};
```

### app/models/\*

now should export function

```javascript
module.exports = function (compound, ModelName) {
    ModelName.validatesPresenceOf(...);
    ModelName.prototype.method = function () {
    };
};
```

As mentioned before, remember the new way to reference other models:

```javascript
module.exports = function (compound, ModelName) {
    ModelName.hasMany(compound.models.anotherModelName, {as: anotherMode});
};
```

### views

Avoid using `formTag` and `formFor` with blocks, new syntax:

```
<% var form = formFor(resource) %>
<%- form.begin() %>
<%- form.input('propertyname') %>
<%- form.submit() %>
<%- form.end() %>
```

### csrf protection

In newest CompoundJS version PUT and DELETE methods also protected from CSRF,
so you need to obtain latest `javascripts/rails.js` 
from compoundjs (generate new project and copy to existing one).

### something else?

fix this file, request pull
